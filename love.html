<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Yes! ğŸ’˜</title>
  <link rel="stylesheet" href="css/style-yes.css">
</head>
<body>
  <main class="page">
    <div class="card">
      <div class="hearts" aria-hidden="true"></div>
      <h1>YAY â€” You said YES! ğŸ‰</h1>
      <p class="message">My heart is doing a happy dance â€” thank you for being mine! Let's make every day adorable together. ğŸŒ¸ğŸ’–</p>
      <p id="proposalNote" class="tiny">(You made my whole year â€” can't wait to spoil you!)</p>
      <div style="margin-top:12px;display:flex;gap:.6rem;align-items:center;justify-content:center;flex-wrap:wrap">
        <button id="notifyBtn" class="btn" style="display:none;background:#ffdfe9;border:1px solid #ffb6d1;color:#8b4f66;padding:.55rem .9rem">Notify proposer ğŸ’Œ</button>
        <a class="btn home" href="index.html">Back to start ğŸ’Œ</a>
      </div>
    </div>
  </main>

  <script src="js/params.js"></script>
  <script>
    // gentle sparkle on load and personalize the message if `porposal-by` present
    document.addEventListener('DOMContentLoaded', ()=>{
      document.querySelector('.card').classList.add('celebrate');
      try{
        const name = window.__proposal && window.__proposal.getName && window.__proposal.getName();
        const note = document.getElementById('proposalNote');
        if(name && note){
          note.textContent = name + " proposed to you â€” you said YES! ğŸ’–";
        }

        // show notify button if an email param exists
        const params = new URLSearchParams(window.location.search);
        const proposerEmail = params.get('porposal-email');
        const notify = document.getElementById('notifyBtn');
        if(proposerEmail && notify){
          notify.style.display = 'inline-block';
          notify.addEventListener('click', function(){
            const subject = encodeURIComponent('I said YES to your proposal! ğŸ’–');
            const body = encodeURIComponent('Hello ' + (name||'') + ',%0D%0A%0D%0AI accepted your proposal. I said YES! ğŸ‰%0D%0A%0D%0ASee you soon â¤ï¸');
            // open mail client
            window.location.href = 'mailto:' + proposerEmail + '?subject=' + subject + '&body=' + body;
          });
        }
      }catch(e){}
    });
  </script>
</body>
</html>